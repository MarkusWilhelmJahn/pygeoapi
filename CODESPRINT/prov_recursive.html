<ul>
<li>
    {% if prov['@type'] == 'prov:Entity' %}
        <strong>Entity:</strong> <a href="{{ prov['@id'] }}">{{ prov['@id'] }}</a>
        <ul>
            {% if prov['prov:generatedAtTime'] is defined %}
                <li>
                    <strong>Generated at time:</strong> {{ prov['prov:generatedAtTime'] }}
                </li>
            {% endif %}
            {% if prov['prov:wasGeneratedBy'] is defined %}
                <li>
                    <strong>Generated By:</strong>
                    {% with prov=prov['prov:wasGeneratedBy'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
            {% if prov['prov:wasDerivedFrom'] is defined %}
                <li>
                    <strong>Derived From:</strong>
                    {% with prov=prov['prov:wasDerivedFrom'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
            {% if prov['prov:wasAttributedTo'] is defined %}
                <li>
                    <strong>Attributed To:</strong>
                    {% with prov=prov['prov:wasAttributedTo'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
        </ul>

    {% elif prov['@type'] == 'prov:Activity' %}
        <strong>Activity:</strong> <a href="{{ prov['@id'] }}">{{ prov['@id'] }}</a>
        <ul>
            {% if prov['prov:startedAtTime'] is defined %}
                <li>
                    <strong>Started at time:</strong> {{ prov['prov:startedAtTime'] }}
                </li>
            {% endif %}
            {% if prov['prov:endedAtTime'] is defined %}
                <li>
                    <strong>Ended at time:</strong> {{ prov['prov:endedAtTime'] }}
                </li>
            {% endif %}
            {% if prov['prov:used'] is defined %}
                {% for used_entity in prov['prov:used'] %}
                    <li>
                        <strong>Used:</strong>
                        {% with prov=used_entity %}
                        {% include 'prov_recursive.html' %}
                        {% endwith %}
                    </li>
                {% endfor %}
            {% endif %}
            {% if prov['prov:wasInformedBy'] is defined %}
                <li>
                    <strong>Informed By:</strong>
                    {% with prov=prov['prov:wasInformedBy'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
            {% if prov['prov:wasAssociatedWith'] is defined %}
                <li>
                    <strong>Associated With:</strong>
                    {% with prov=prov['prov:wasAssociatedWith'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
        </ul>

    {% elif prov['@type'] == 'prov:Agent' %}
        <strong>Agent:</strong> <a href="{{ prov['@id'] }}">{{ prov['@id'] }}</a>
        <ul>
            <li><strong>Name:</strong> {{ prov['schema:name'] }}</li>
            <li><strong>Affiliation:</strong> {{ prov['schema:affiliation'] | default('N/A') }}</li>
            {% if prov['prov:actedOnBehalfOf'] is defined %}
                <li>
                    <strong>On Behalf Of:</strong>
                    {% with prov=prov['prov:actedOnBehalfOf'] %}
                    {% include 'prov_recursive.html' %}
                    {% endwith %}
                </li>
            {% endif %}
        </ul>
    {% else %}
       <a href="{{ prov['@id'] }}">{{ prov['@id'] }}</a>
    {% endif %}
</li>
</ul>